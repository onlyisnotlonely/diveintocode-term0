# 1. OSにおけるユーザーとは

- そもそもOSとは何か？

  OSは **"Operating System"** の略称。

  PCの利用に不可欠となる機能を提供しており、例えば以下のような機能があげられる。

  - 入出力の制御（キーボード、マウスの操作）：マウスを何回押したか、キーボードのどのキーを操作したか    
  - タスク管理：アプリケーションの起動、終了、切り替え
  - ファイル管理：ファイルに名前をつける、ファイルの内容を読み込む、ファイルにテキストを書き込む

- OSにおけるユーザーとは何か？

  OSにおけるユーザーとは、文字通り「OSを利用する人」である。

  ユーザーもOSの利用目的に応じて、利用するだけの「エンドユーザー」、開発を行う「ディベロッパー」、システムを管理する「管理者」などに分かれる。

  いずれのユーザーも、OSを利用する際にアカウント（ユーザー名、およびパスワード）の認証が必要となるため、ユーザーを「アカウント」と同義と捉えても差し支えないと思われる。

  なぜならば、複数のユーザーがアカウントを共有している場合があるからだ。

  例えば、家族で１つのアカウントを共有してPCを利用する場合を考えてみる。

  実際の利用者は異なっても、管理者からは１つのアカウント（特定のユーザ名）がOSにアクセスし続けているように見える。

- 例：Macの場合で「ユーザーとは何か」を考える

  MacにはApple社が開発したMac OSがインストールされており、Mac OSを利用する場合は「Mac OSユーザー」となる。

  MacでLinuxを使用する場合には、別途インストールする必要がある。

  Mac上でLinuxを使用している時には、Linuxユーザーとなる。

- 自分がどのユーザーであるかを確認するには、以下のいずれかのコマンドを入力する。

  - $ users：ユーザー名のみ一覧表示する

  - $ who：ユーザー名、アクセスした端末、及びアクセスした時間を一覧表示する

  尚、$ whoコマンドには複数のオプションが存在している。

  試しに、現在ログインしているユーザー名とユーザー数を表示する-qオプションを用いて **$ who -q** とコマンド入力したところ、以下の通り表示された。

  ```
  makintosh makintosh
  # users = 2
  ```

  複数の端末にアクセスしている場合には、ユーザー数が重複してカウントされる。

# 2. OSにおけるグループとは

- OSグループとは何か？なぜOSグループを作る必要があるのか？

  OSグループとは、複数のOSユーザーを束ねたユーザー群のことで、メイングループとサブグループに大別される。

  OSユーザーは必ず１つのメイングループに所属しなければならず、サブグループは複数所属が可能となっている。

  各OSユーザーがファイルにアクセスする際には、権限（パーミッション）が必要となる。

  権限には、参照権限、編集権限など複数の種類があるため、OSグループ毎に権限設定を行うことでユーザー管理が容易になる。

- もしOSグループがない場合、以下のような不都合が生じる。

   - 個別ユーザー（所有者、もしくは所有者以外）の権限しか存在しないことになり、複数人で同じファイルやフォルダを管理することができない。
   - OSユーザー毎に個別に権限設定しなければならない。権限設定に手間や時間がかかったり、抜け漏れが生じる可能性がある。

- 自分がどのグループであるか確認するには **$ id** コマンドを用いる。

  **$ id** を用いると、ユーザーIDやグループIDが一覧表示される。

  尚、IDコマンドには複数のオプションがあり、いくつかを以下に抜粋した。

  - $ id -g：メイングループIDのみ表示する
  - $ id -gn：メイングループ名のみ表示する
  - $ id -G：所属している全てのグループのIDを一覧表示する。
  - $ id -Gn：所属しているグループ名を表示する

# 3. ファイル・ディレクトリの権限（Unix、Linux）

ファイルやフォルダの権限を確認する場合、カレントディレクトリに対して、**$ ls -l** とコマンド入力する。

結果、以下の例のように権限が表示される。

```
-rw-r--r--  1 user user      9  1月 1 00:00 hoge.txt
```

上記の例では、「user user」は「ファイル所有者、ファイル所有グループ」をそれぞれ意味している。

また、「hoge.txt」というファイルに対して「-rw-r--r--」の10桁で権限が表示されている。読み方は以下の通り。

- 最初の１文字目：ファイル種別（-：ファイル、d：ディレクトリ、｜：シンボリックリンク）
- 2文字目から4文字目：ファイルの所有者に対する権限（r：読み取り、w：書き込み、x：実行）
- 5文字目から7文字目：ファイルの所有グループに対する権限（r：読み取り、w：書き込み、x：実行）
- 8文字目から10文字目：その他に対する権限（r：読み取り、w：書き込み、x：実行）

ファイル（hoge.txt)について、所有者には「読み取り」「書き込み」、所有グループには「読み取り」、その他に「読み取り」の権限があることを意味している。

このファイルを読み取り権限のみに変更する場合は、**chmod** コマンドを用いて10桁の権限から「w」を消去すれば良い。

具体的な手順は以下の通り2種類ある。

1. 数値で指定する：**$ chmod 444 hoge.txt**

  - 権限を数値で指定する場合「chmod モード 対象ファイル」の順番でコマンドを入力する。
  - モードの数字は「4：読み取り、2：書き込み、1：実行」を意味する。
  - モードの数字を合計値を「所有者」「所有グループ」「その他」の順番で入力することでパーミッションを変更できる。

  444は、「所有者」に「読み取り」、「所有グループ」に「読み取り」、「その他」に「読み取り」の権限を付与したことを意味している。

2. アルファベットで指定する：**$ chmod a=r hoge.txt**

- 権限をアルファベットで指定する場合「chmod 変更対象 変更方法 変更内容 対象ファイル」の順番でコマンドを入力する。
- 変更対象は「u：所有者、g：グループ、o：その他、a：全て」を意味する。
- 変更方法は「=：指定した権限にする、+：指定した権限を付与する、-：指定した権限を除去する」を意味する。
- 変更内容は「4：読み取り、2：書き込み、1：実行」を意味する。
- モードの数字を合計値を「所有者」「所有グループ」「その他」の順番で入力することでパーミッションを変更できる。

「a=r」は「全ユーザーの権限を"読み取り"に指定する」ことを意味している。
