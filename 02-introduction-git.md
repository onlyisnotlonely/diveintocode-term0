# 1. Gitとは

Gitとは、リポジトリ（ディレクトリやファイルの編集履歴）を管理するソフトウェアで、ソフトウェアの開発現場や研究機関等で利用されている。Gitを利用するメリットは以下の通り。

- １つのファイルを同時に編集出来る：

git上では、ブランチと呼ばれる作業場所を作成し、各ブランチでファイルの編集作業が出来る。

１つのファイルを複数のブランチで同時に編集出来るので（＝他の誰かがファイルを編集している際に自分が編集できない事態を回避出来るので）、プロジェクトの進捗を早めることが出来る。

- 編集履歴を追跡しやすい：

git上では、編集作業されたファイルを「時間（いつ）、編集者・編集者のメールアドレス（誰が）、作業したブランチ（どこで）、編集内容（何を・どのように）」と　共にリポジトリに記録する（コミットする）ため、編集作業を行った人以外でも履歴を追跡しやすい。

- コンフリクトを管理出来る：

各ブランチでの編集作業を完了（コミット）した後、最後に編集内容を統合（ブランチをmerge）する。

複数人が１つのファイルを別々に編集するとコンフリクトが生じる（同じファイルで異なる編集が行われる）が、Gitではmergeを行う都度「どの編集内容を正とするか」確認を求める仕組みとなっており、誤った編集内容が安易に上書き保存されないようになっている。

GitはローカルPCで動作するソフトウェアだが、類似するサービスとしてはGitHubがある。

GitHubは、クラウド上でgitのリポジトリを管理するを管理するサービスで、サーバーを設置する手間・コストがかからない等の利点がある。


# 2. git init

**$ git init** は、「既存のリポジトリを初期化する」あるいは「リポジトリを新規作成する」コマンド。

既にGitリポジトリが存在する場合、**$ git init**を実行した場合、既存のリポジトリが初期化される。

**$ git init** をコマンド入力すると、.gitディレクトリが作成される。.gitディレクトリはGitが動作するために必要な情報が入っている。

# 3. git add

**git add** は、ステージング領域（保存用リポジトリ）にファイルを追加するコマンド。

ステージング領域に追加したファイルをコミットすることで、ディレクトリやファイルの状態がリポジトリに保存される。

ステージング領域にファイルを追加するメリットは以下の通りで、ディレクトリやファイルのバージョン（どの段階で何をどのように編集したのか）を適切に管理することが出来る。

- コミットする際は、編集内容の概要をメッセージとして残すのが通例。編集内容に関係するファイルのみ選別してステージングするステップを踏むことで、無関係なファイルのコミットを避けることが出来る。
- 例えば、複数のファイルで同じような編集を行う場合は、複数のファイルをステージングしてから一括でコミットすることで、ファイルのバージョン管理がしやすい。

もしhoge.htmlというファイルをステージング領域に追加する場合は **$ git add hoge.htm** 、ステージング領域から削除する場合は **$ git reset hoge.html** と入力する。

尚、ステージング領域にあるファイルを確認する際は、ターミナル上で「$ git status」とコマンド入力する。

**$ git add** と**$ git status**を続けて入力し、こまめにステータスを確認する癖をつけたい。

# 4. git commit

**git commit** は、ステージング領域に追加されたディレクトリやファイルをリポジトリに記録するコマンド。

コミットのログを確認する際は、ターミナルで **git log** と入力する。

コミットを取り消す際は、以下のコマンドを入力する。（以下は、test.pyのコミットを取り消す場合）

**$ git reset --hard test.py** (hardオプションを付けた場合、コミットを取り消した上でカレントディレクトリの内容も書き換える)
**$ git reset --soft test.py** (softオプションを付けた場合、コミットを取り消すのみでカレントディレクトリの内容は書き換わらない)

hardオプションを使って過去のコミットに遡ると、カレントディレクトリ、ステージング領域の内容が引き継がれないため、
留意が必要。

例えば、以下のコミット履歴があった場合、commit message1までコミットを戻すには、ターミナル上で以下のいずれかを入力する。

**$ git reset --soft 7b6f15fdde0f56dae4541a1a896ef6dca630e28f**
**$ git reset --hard 7b6f15fdde0f56dae4541a1a896ef6dca630e28f**

```
commit c4a9f6aad4ea6f5b372b9bc742c1dfc06b8641f1 (HEAD -> master, origin/master, origin/HEAD)
Author: Akihiro Nakao <nakao@diveintocode.jp>
Date:   Wed Mar 21 16:42:30 2018 +0900

    commit message 3

commit cff10b7231c5238cbd7ddab0bc19c3b7f02ba35d
Author: Akihiro Nakao <nakao@diveintocode.jp>
Date:   Wed Mar 21 16:40:31 2018 +0900

    commit message 2

commit 7b6f15fdde0f56dae4541a1a896ef6dca630e28f
Author: Akihiro Nakao <genn777f3@gmail.com>
Date:   Fri Feb 23 19:38:22 2018 +0900

    commit message 1
```

- softオプションを用いた場合
resetコマンドでcommit message 1のコミットまで遡っても、遡る前にcommit message2、commit message 3でカレントディレクトリ、ステージング領域で保持していたファイルの状態が引き継がれる。

- hardオプションを用いた場合：

resetコマンドでcommit message 1のコミットまで遡った際、遡る前にcommit message2、commit message 3でカレントディレクトリ、ステージング領域で
保持していたファイルの状態が引き継がれないため、commit message 2やcommit message3のファイルの状態を復元できない。そのため、hardオプションの利用には注意が必要である。
